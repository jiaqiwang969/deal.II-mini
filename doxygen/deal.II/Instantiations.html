<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="canonical" href="https://www.dealii.org/current/doxygen/deal.II/Instantiations.html" />
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>The deal.II Library: Template instantiations</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link rel="SHORTCUT ICON" href="deal.ico"></link>
<script type="text/javascript" src="custom.js"></script>
<meta name="author" content="The deal.II Authors <authors@dealii.org>"></meta>
<meta name="copyright" content="Copyright (C) 1998 - 2021 by the deal.II authors"></meta>
<meta name="deal.II-version" content="10.0.0-pre"></meta>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo200.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">
   &#160;<span id="projectnumber">Reference documentation for deal.II version 10.0.0-pre</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!--Extra macros for MathJax:-->
<div style="display:none">
\(\newcommand{\dealvcentcolon}{\mathrel{\mathop{:}}}\)
\(\newcommand{\dealcoloneq}{\dealvcentcolon\mathrel{\mkern-1.2mu}=}\)
\(\newcommand{\jump}[1]{\left[\!\left[ #1 \right]\!\right]}\)
\(\newcommand{\average}[1]{\left\{\!\left\{ #1 \right\}\!\right\}}\)
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Template instantiations </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Instantiation of complex class and function templates is expensive both in terms of compile time and disk space. Therefore, we try to separate declaration and implementation of templates as far as possible, and make sure that implementations are read by the compiler only when necessary.</p>
<p>Template classes in <code>deal.II</code> can be grouped into three categories, depending on the number of probable different instantiations. These three groups are discussed in the following.</p>
<h1><a class="anchor" id="Inst1"></a>
Known and fixed number of instantiations</h1>
<p>These are the classes having template parameters with very predictable values. The typical prototype is </p><div class="fragment"><div class="line"><span class="keyword">template</span> &lt;<span class="keywordtype">int</span> dim&gt; <span class="keyword">class </span><a class="code" href="classFunction.html">Function</a>;</div></div><!-- fragment --><p>Here, we have a small number of instantiations (<code>dim = 1,2,3</code>) known at the time of design of the library. Therefore, member functions of this class are defined in a <code>.cc</code> file in the source directory and we instantiate the template for these known values explicitly in the source file.</p>
<p>From an application viewpoint, all you actually get to see then is the declaration of the template. Actual instantiations of member functions happens inside the library and is done when you compile the library, not when you compile your application code.</p>
<p>For these classes, adding instantiations for new parameters involves changing the library. However, this is rarely needed, of course, unless you are not content with computing only in 1d, 2d, or 3d.</p>
<h2><a class="anchor" id="Inst1a"></a>
Available instances</h2>
<p>If the template parameter is <code>dim</code>, the available instances are for <code>dim=1,2,3</code>, if there is no other information.</p>
<p>There are other cases of classes (not depending on the spatial dimension) for which only a certain, small number of template arguments is supported and explicit instantiations are provided in the library. In particular, this includes all the linear algebra classes that are templatized on the type of the scalar underlying stored values: we only support <code>double</code>, <code>float</code>, and in some cases <code>std::complex&lt;double&gt;</code> and <code>std::complex&lt;float&gt;</code>.</p>
<h1><a class="anchor" id="Inst2"></a>
A few instantiations, most of which are known</h1>
<p>These are class templates usually having a small number of instantiations, but additional instantiations may be necessary. Therefore, a set of instantiations for the most likely parameters is provided precompiled in the libraries, but the implementation of the templates are provided in a special header file so that it is accessible in case someone wants to instantiate it for an unforeseen argument.</p>
<p>Typical examples for this would be some of the linear algebra classes that take a vector type as template argument. They would be instantiated within the library for <code><a class="el" href="classVector.html">Vector</a>&lt;double&gt;</code>, <code><a class="el" href="classVector.html">Vector</a>&lt;float&gt;</code>, <code><a class="el" href="classBlockVector.html">BlockVector</a>&lt;double&gt;</code>, and <code><a class="el" href="classBlockVector.html">BlockVector</a>&lt;float&gt;</code>, for example. However, they may also be used with other vector types, such as <code>long double</code> and <code>std::complex&lt;long double&gt;</code>, as long as they satisfy certain interfaces, including vector types that are not part of the library but possibly defined in an application program. In such a case, applications can instantiate these templates by hand as described in the next section.</p>
<h2><a class="anchor" id="Inst2c"></a>
Creating new instances</h2>
<p>Choose one of your source files to provide the required instantiations. Say that you want the class template <code>XXXX</code>, defined in the header file <code>xxxx.h</code>, instantiated with the template parameter <code>long double</code>. Then, your file should contain the lines </p><div class="fragment"><div class="line">                  <span class="comment">// Include class template declaration</span></div><div class="line"><span class="preprocessor">#include &lt;xxxx.h&gt;</span></div><div class="line">                  <span class="comment">// Include member definitions</span></div><div class="line"><span class="preprocessor">#include &lt;xxxx.templates.h&gt;</span></div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">template <span class="keyword">class </span>XXXX&lt;long <a class="code" href="classdouble.html">double</a>&gt;;</div></div><!-- fragment --><h2><a class="anchor" id="Inst2p"></a>
Provided instances</h2>
<p>Like with the classes in section <a class="el" href="Instantiations.html#Inst1">Known and fixed number of instantiations</a>, the instances provided in the library are often listed in the documentation of that class in a form similar to this: </p><pre class="fragment">Template Instantiations: some  (&lt;p1&gt;a,b,c&lt;p2&gt;)
</pre><h1><a class="anchor" id="Inst3"></a>
Many unknown instantiations</h1>
<p>These are the classes, where no reasonable predetermined set of instances exists. Therefore, all member definitions are included in the header file and are instantiated wherever needed. An example would be the <a class="el" href="classSmartPointer.html">SmartPointer</a> class template that can be used with virtually any template argument. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
